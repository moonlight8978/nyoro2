<%= breadcrumb(
  { path: home_path, name: 'ホーム' },
  { path: profile_path(@user), name: "#{@user.user_name || '無名'}" },
  'リスト'
) %>

<%= page_title(
  "#{@user.user_name || '無名'}さんのリスト",
  "#{@user.user_name || '無名'}'s list"
) %>

<div class="b-box p-3">
  <table class="b-data-table">
    <thead>
      <tr>
        <th class="b-col-small b-col-id">番号</th>
        <th class="b-col-wide">タイトル</th>
        <th class="b-col-small b-col-last">点</th>
      </tr>
    </thead>

    <tbody>
      <% @ratings.each_with_index do |rating, index| %>
        <% break if index > 20 %>
        <tr>
          <td class="b-col-small b-col-id"><%= index + 1 %></td>
          <td class="b-col-wide"><%= rating.album.title %></td>
          <td class="b-col-small b-col-last"><%= rating.star %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>

<%= content_for :sidebar do %>
  <div class="b-box-group mt-3 mt-lg-0">
    <div class="b-box">
      <div class="b-box-row">
        <div class="b-rating-inside-star">
          <i class="fa fa-star">
            <span><%= @statistics[:average] %></span>
          </i>
          <div class="b-rating-description">
            全部は<%= @statistics[:votes] %>票
          </div>
        </div>
      </div>

      <div class="b-box-row">
        <div class="" style="position: relative; width: 100%; height: 200px;">
          <canvas id="userRatedAlbumsChart"
            data-data="<%= @statistics[:data] %>"
            data-labels="<%= @statistics[:labels] %>"
          >
          </canvas>
        </div>
      </div>
    </div>
  </div>
<% end %>
